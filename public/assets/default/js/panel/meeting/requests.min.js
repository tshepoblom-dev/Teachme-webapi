!function(e){"use strict";e("body").on("click",".js-finish-meeting-reserve",(function(t){t.preventDefault();var n=e(this).attr("data-id"),i='<div class="">\n    <p class="">'+finishReserveHint+'</p>\n    <label for="finishReason" class="d-block mt-10">Reason for finishing the meeting</label>\n    <input type="text" id="finishReason" class="form-control mt-5" placeholder="Reasoning for ending meeting">\n    <div class="mt-30 d-flex align-items-center justify-content-center">\n        <button type="button" id="finishReserve" data-href="/panel/meetings/'+n+'/finish" class="btn btn-sm btn-primary">'+finishReserveConfirm+'</button>\n        <button type="button" class="btn btn-sm btn-danger ml-10 close-swl">'+finishReserveCancel+"</button>\n    </div>\n</div>";Swal.fire({title:finishReserveTitle,html:i,icon:"warning",showConfirmButton:!1,showCancelButton:!1,allowOutsideClick:function(){return!Swal.isLoading()}})})),e("body").on("click","#finishReserve",(function(t){t.preventDefault();var n=e(this),i=n.attr("data-href"),s=e("#finishReason").val().trim();n.addClass("loadingbar primary").prop("disabled",!0),e.post(i,{reason:s},(function(e){e&&200===e.code?(Swal.fire({title:finishReserveSuccess,text:finishReserveSuccessHint+"\n"+e.message,showConfirmButton:!1,icon:"success"}),setTimeout((function(){void 0!==e.redirect_to&&void 0!==e.redirect_to&&null!==e.redirect_to&&""!==e.redirect_to?window.location.href=e.redirect_to:window.location.reload()}),1e3)):Swal.fire({title:finishReserveFail,text:finishReserveFailHint,icon:"error"})})).error((function(e){Swal.fire({title:finishReserveFail,text:finishReserveFailHint,icon:"error"})})).always((function(){n.removeClass("loadingbar primary").prop("disabled",!1)}))})),e("body").on("click",".add-meeting-url",(function(t){t.preventDefault();var n=e(this).attr("data-item-id"),i=e(".js-meeting-password-"+n).val(),s=e(".js-meeting-link-"+n).val(),o=e("#liveMeetingLinkModal");Swal.fire({html:'<div id="meetingLinkModal">'+o.html()+"</div>",showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var t=e("#meetingLinkModal");t.find('input[name="item_id"]').val(n),t.find('input[name="password"]').val(i),t.find('input[name="link"]').val(s)}})})),e("body").on("click",".js-save-meeting-link",(function(t){t.preventDefault();var n=e(this),i=n.closest("form"),s=i.attr("action"),o=i.serializeObject();n.addClass("loadingbar primary").prop("disabled",!0),e.post(s,o,(function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue">'+linkSuccessAdd+"</h3>",showConfirmButton:!1}),setTimeout((function(){window.location.reload()}),2e3))})).fail((function(e){n.removeClass("loadingbar primary").prop("disabled",!1);var t=e.responseJSON;t&&t.errors&&Object.keys(t.errors).forEach((function(e){var n=t.errors[e],s=i.find('[name="'+e+'"]');s.addClass("is-invalid"),s.parent().find(".invalid-feedback").text(n[0])}))}))})),e("body").on("click",".js-add-meeting-session",(function(t){t.preventDefault();var n=e(this).attr("data-item-id"),i=e(this).attr("data-date"),s=e("#meetingCreateSessionModal");Swal.fire({html:'<div id="meetingSessionModal">'+s.html()+"</div>",showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"42rem",onOpen:function(){var t=e("#meetingSessionModal");t.find('input[name="item_id"]').val(n),t.find(".js-meeting-date").text(i),t.find(".js-create-meeting-session").removeClass("d-none"),t.find(".js-create-meeting-session").attr("data-item-id",n),t.find(".js-join-to-session").addClass("d-none"),t.find(".js-for-create-session-text").removeClass("d-none"),t.find(".js-for-join-session-text").addClass("d-none")}})})),e("body").on("click",".js-create-meeting-session",(function(t){t.preventDefault();var n=e(this),i=n.attr("data-item-id"),s="/panel/meetings/".concat(i,"/add-session");n.addClass("loadingbar primary").prop("disabled",!0);var o='<div class="">\n                <h3 class="font-16 text-center text-dark-blue">'.concat(sessionSuccessAdd,'</h3>\n                <p class="mt-5 font-14 text-gray">').concat(youCanJoinTheSessionNowLang,"</p>\n            </div>");e.post(s,{},(function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:o,showConfirmButton:!1}),setTimeout((function(){window.location.reload()}),3e3))})).fail((function(e){n.removeClass("loadingbar primary").prop("disabled",!1)}))})),e("body").on("click",".js-accept-meeting-request",(function(t){t.preventDefault();var n=e(this),i=n.attr("data-item-id"),s="/panel/meetings/".concat(i,"/accept-request");Swal.fire({title:"Are you sure?",text:"Do you want to accept this meeting request?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, accept it!",cancelButtonText:"Cancel"}).then((function(t){t.isConfirmed&&(n.addClass("loadingbar primary").prop("disabled",!0),e.post(s,{},(function(e){e&&200===e.code?(Swal.fire({icon:"success",title:"Accepted!",text:e.message||"The meeting request has been accepted.",showConfirmButton:!1}),setTimeout((function(){window.location.reload()}),1500)):Swal.fire({icon:"error",title:"Failed!",text:e.message||"Something went wrong. Please try again."})})).fail((function(e){Swal.fire({icon:"error",title:"Failed!",text:"Server error occurred. Please try again."})})).always((function(){n.removeClass("loadingbar primary").prop("disabled",!1)})))}))}))}(jQuery);